<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Basics &gt; Proportions &gt; Compare proportions</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">

/* padding for bootstrap navbar */
body {
  padding-top: 50px;
  padding-bottom: 40px;
}

/* offset scroll position for anchor links (for fixed navbar)  */
.section h2 {
  padding-top: 55px;
  margin-top: -55px;
}
.section h3 {
  padding-top: 55px;
  margin-top: -55px;
}

/* don't use link color in navbar */
.dropdown-menu>li>a {
	display: inline;
  color: black;
  padding-top: 0;
  padding-bottom: 0;
}

.dropdown-menu .divider {
	margin-top: 2px;
	margin-bottom: 2px;
}

img {
  max-width: 85% !important;
}

/*
img.center {
  display: block;
  margin: 0 auto;
}
*/

</style>

<link rel="stylesheet" href="libs/font-awesome-4.1.0/css/font-awesome.min.css"/>
<link rel="shortcut icon" type="image/png" href="/docs/images/radiant_red.png"/>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://github.com/radiant-rstats/docs">Radiant</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="/docs/index.html">Home</a></li>
        <li><a href="/docs/news.html">News</a></li>
        <li><a href="/docs/install.html">Install</a></li>
        <li class="dropdown">
          <a href="/docs/data/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Data<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li><a href="/docs/data/manage.html">Manage</a></li>
             <li><a href="/docs/data/view.html">View</a></li>
             <li><a href="/docs/data/visualize.html">Visualize</a></li>
             <li><a href="/docs/data/pivotr.html">Pivot</a></li>
             <li><a href="/docs/data/explore.html">Explore</a></li>
             <li><a href="/docs/data/transform.html">Transform</a></li>
             <li><a href="/docs/data/combine.html">Combine</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="/docs/design/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Design<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li class="dropdown-header">DOE</li>
             <li><a href="/docs/design/doe.html">Design of Experiments (DOE)</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Sample</li>
             <li><a href="/docs/design/sampling.html">Random sampling</a></li>
             <li><a href="/docs/design/sample_size.html">Sample size (single)</a></li>
             <li><a href="/docs/design/sample_size_comp.html">Sample size (compare)</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="/docs/basics/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Basics<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li class="dropdown-header">Probability</li>
             <li><a href="/docs/basics/prob_calc.html">Probability calculator</a></li>
             <li><a href="/docs/basics/clt.html">Central Limit Theorem</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Means</li>
             <li><a href="/docs/basics/single_mean.html">Single mean</a></li>
             <li><a href="/docs/basics/compare_means.html">Compare means</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Proportions</li>
             <li><a href="/docs/basics/single_prop.html">Single proportion</a></li>
             <li><a href="/docs/basics/compare_props.html">Compare proportions</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Tables</li>
             <li><a href="/docs/basics/goodness.html">Goodness of fit</a></li>
             <li><a href="/docs/basics/cross_tabs.html">Cross-tabs</a></li>
             <li><a href="/docs/basics/correlation.html">Correlation</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="/docs/model/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Model<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li class="dropdown-header">Estimate</li>
             <li><a href="/docs/model/regress.html">Linear regression (OLS)</a></li>
             <li><a href="/docs/model/logistic.html">Logistic regression (GLM)</a></li>
             <li><a href="/docs/model/nn.html">Neural Network</a></li>
             <li><a href="/docs/model/nb.html">Naive Bayes</a></li>
             <li><a href="/docs/model/crtree.html">Classification and regression trees</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Evaluate</li>
             <li><a href="/docs/model/evalreg.html">Evaluate regression</a></li>
             <li><a href="/docs/model/evalbin.html">Evaluate classification</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Recommend</li>
             <li><a href="/docs/model/crs.html">Collaborative Filtering</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Decide</li>
             <li><a href="/docs/model/dtree.html">Decision analysis</a></li>
             <li><a href="/docs/model/simulater.html">Simulate</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="/docs/multivariate/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Multivariate<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li class="dropdown-header">Maps</li>
             <li><a href="/docs/multivariate/mds.html">(Dis)similarity</a></li>
             <li><a href="/docs/multivariate/prmap.html">Attributes</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Factor</li>
             <li><a href="/docs/multivariate/pre_factor.html">Pre-factor</a></li>
             <li><a href="/docs/multivariate/full_factor.html">Factor</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Cluster</li>
             <li><a href="/docs/multivariate/hclus.html">Hierarchical</a></li>
             <li><a href="/docs/multivariate/kclus.html">K-clustering</a></li>
             <li class="divider"></li>
             <li class="dropdown-header">Conjoint</li>
             <li><a href="/docs/multivariate/conjoint.html">Conjoint</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="/docs/R/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">R<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
             <li><a href="/docs/data/report_rmd.html">Report > Rmd</a></li>
             <li><a href="/docs/data/report_r.html">Report > R</a></li>
             <li><a href="/docs/programming.html">Programming</a></li>
             <li><a href="/docs/resources.html">Resources</a></li>
          </ul>
        </li>
        <li><a href="/docs/tutorials.html">Tutorials</a></li>
        <li><a href="/docs/about.html">About</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Basics &gt; Proportions &gt; Compare proportions</h1>

</div>


<hr />
<blockquote>
<p>Compare proportions for two or more groups in the data</p>
</blockquote>
<p>The compare proportions test is used to evaluate if the frequency of occurrence of some event, behavior, intention, etc. differs across groups. The null hypothesis for the difference in proportions across groups in the population is set to zero. We test this hypothesis using sample data.</p>
<p>We can perform either a one-tailed test (i.e., <code>less than</code> or <code>greater than</code>) or a two-tailed test (see the <code>Alternative hypothesis</code> dropdown). A one-tailed test is useful if we want to evaluate if the available sample data suggest that, for example, the proportion of dropped calls is larger (or smaller) for one wireless provider compared to others.</p>
<div id="example" class="section level3">
<h3>Example</h3>
<p>We will use a sample from a dataset that describes the survival status of individual passengers on the Titanic. The principal source for data about Titanic passengers is the Encyclopedia Titanic. One of the original sources is Eaton &amp; Haas (1994) Titanic: Triumph and Tragedy, Patrick Stephens Ltd, which includes a passenger list created by many researchers and edited by Michael A. Findlay. Lets focus on two variables in the database:</p>
<ul>
<li>survived = a factor with levels <code>Yes</code> and <code>No</code></li>
<li>pclass = Passenger Class (1st, 2nd, 3rd). This is a proxy for socio-economic status (SES) 1st ~ Upper; 2nd ~ Middle; 3rd ~ Lower</li>
</ul>
<p>Suppose we want to test if the proportion of people that survived the sinking of the Titanic differs across passenger classes. To test this hypothesis we select <code>pclass</code> as the grouping variable and calculate proportions of <code>yes</code> (see <code>Choose level</code>) for <code>survived</code> (see <code>Variable (select one)</code>).</p>
<p>In the <code>Choose combinations</code> box select all available entries to conduct pair-wise comparisons across the three passenger class levels. Note that removing all entries will automatically select all combinations. Unless we have an explicit hypothesis for the direction of the effect we should use a two-sided test (i.e., <code>two.sided</code>). Our first alternative hypothesis would be ‘The proportion of survivors amongst 1st class passengers was different compared to 2nd class passengers’.</p>
<p align="center">
<img src="figures_basics/compare_props_summary.png">
</p>
<p>The first two blocks of output show basic information about the test (e.g.,. selected variables and confidence levels) and summary statistics (e.g., proportions, standard errors, etc. per group). The final block of output shows the following:</p>
<ul>
<li><code>Null hyp.</code> is the null hypothesis and <code>Alt. hyp.</code> the alternative hypothesis</li>
<li><code>diff</code> is the difference between the sample proportion for two groups (e.g., 0.635 - 0.441 = 0.194). If the null hypothesis is true we expect this difference to be small (i.e., close to zero)</li>
<li><code>p.value</code> is the probability of finding a value as extreme or more extreme than <code>diff</code> if the null hypothesis is true</li>
</ul>
<p>If we check <code>Show additional statistics</code> the following output is added:</p>
<p align="center">
<img src="figures_basics/compare_props_summary_additional.png">
</p>
<ul>
<li><code>chisq.value</code> is the chi-squared statistic associated with <code>diff</code> that we can compare to a chi-squared distribution. For additional discussion on how this metric is calculated see the help file in <em>Basics &gt; Tables &gt; Cross-tabs</em>. For each combination the equivalent of a 2X2 cross-tab is calculated.</li>
<li><code>df</code> is the degrees of freedom associated with each statistical test (1).</li>
<li><code>2.5% 97.5%</code> show the 95% confidence interval around the difference in sample proportions. These numbers provide a range within which the true population difference is likely to fall</li>
</ul>
</div>
<div id="testing" class="section level3">
<h3>Testing</h3>
<p>There are three approaches we can use to evaluate the null hypothesis. We will choose a significance level of 0.05.<sup>1</sup> Of course, each approach will lead to the same conclusion.</p>
<div id="p.value" class="section level4">
<h4>p.value</h4>
<p>Because the p.values are <strong>smaller</strong> than the significance level for each pair-wise comparison we can reject the null hypothesis that the proportions are equal based on the available sample of data. The results suggest that 1st class passengers were more likely to survive the sinking than either 2nd or 3rd class passengers. In turn, the 2nd class passengers were more likely to survive than those in 3rd class.</p>
</div>
<div id="confidence-interval" class="section level4">
<h4>Confidence interval</h4>
<p>Because zero is <strong>not</strong> contained in any of the confidence intervals we reject the null hypothesis for each evaluated combination of passenger class levels.</p>
</div>
<div id="chi-squared-values" class="section level4">
<h4>Chi-squared values</h4>
<p>Because the calculated chi-squared values (20.576, 104.704, and 25.008) are <strong>larger</strong> than the corresponding <em>critical</em> chi-squared value we reject the null hypothesis for each evaluated combination of passenger class levels. We can obtain the critical chi-squared value by using the probability calculator in the <em>Basics</em> menu. Using the test for 1st versus 2nd class passengers as an example, we find that for a chi-squared distribution with 1 degree of freedom (see <code>df</code>) and a confidence level of 0.95 the critical chi-squared value is 3.841.</p>
<p align="center">
<img src="figures_basics/compare_props_prob_calc.png">
</p>
<p>In addition to the numerical output provided in the <em>Summary</em> tab we can also investigate the association between <code>pclass</code> and <code>survived</code> visually (see the <em>Plot</em> tab). The screen shot below shows two bar charts. The first chart has confidence interval (black) and standard error (blue) bars for the proportion of <code>yes</code> entries for <code>survived</code> in the sample. Consistent with the results shown in the <em>Summary</em> tab there are clear differences in the survival rate across passenger classes. The <code>Dodge</code> chart shows the proportions of <code>yes</code> and <code>no</code> in <code>survived</code> side-by-side for each passenger class. While 1st class passengers had a higher proportion of <code>yes</code> than <code>no</code> the opposite holds for the 3rd class passengers.</p>
<p align="center">
<img src="figures_basics/compare_props_plot.png">
</p>
</div>
</div>
<div id="technical-notes" class="section level3">
<h3>Technical notes</h3>
<ul>
<li>Radiant uses R’s <code>prop.test</code> function to compare proportions. When one or more expected values are small (e.g., 5 or less) the p.value for this test is calculated using simulation methods. When this occurs it is recommended to rerun the test using <em>Basics &gt; Tables &gt; Cross-tabs</em> and evaluate if some cells may have an expected value below 1.</li>
<li>For one-sided tests (i.e., <code>Less than</code> or <code>Greater than</code>) critical values must be obtained by using the normal distribution in the probability calculator and squaring the corresponding Z-statistic.</li>
</ul>
</div>
<div id="multiple-comparison-adjustment" class="section level3">
<h3>Multiple comparison adjustment</h3>
<p>The more comparisons we evaluate the more likely we are to find a “significant” result just by chance even if the null hypothesis is true. If we conduct 100 tests and set our <strong>significance level</strong> at 0.05 (or 5%) we can expect to find 5 p.values smaller than or equal to 0.05 even if there are no associations in the population.</p>
<p>Bonferroni adjustment ensures the p.values are scaled appropriately given the number of tests conducted. <a href="https://xkcd.com/882/" target="blank">This XKCD cartoon</a> expresses the need for this type of adjustments very clearly.</p>
</div>
<div id="stats-speak" class="section level3">
<h3><em>Stats speak</em></h3>
<p>This is a <strong>comparison of proportions</strong> test of the null hypothesis that the true population <strong>difference in proportions</strong> is equal to <strong>0</strong>. Using a significance level of 0.05, we reject the null hypothesis for each pair of passengers classes evaluated, and conclude that the true population <strong>difference in proportions</strong> is <strong>not equal to 0</strong>.</p>
<p>The p.value for the test of differences in the survival proportion for 1st versus 2nd class passengers is <strong>&lt; .001</strong>. This is the probability of observing a sample <strong>difference in proportions</strong> that is as or more extreme than the sample <strong>difference in proportions</strong> from the data if the null hypothesis is true. In this case, it is the probability of observing a sample <strong>difference in proportions</strong> that is less than <strong>-0.194</strong> or greater than <strong>0.194</strong> if the true population <strong>difference in proportions</strong> is <strong>0</strong>.</p>
<p>The 95% confidence interval is <strong>0.112</strong> to <strong>0.277</strong>. If repeated samples were taken and the 95% confidence interval computed for each one, the true <strong>difference in population proportions</strong> would fall inside the confidence interval in 95% of the samples</p>
<p><sup>1</sup> The <strong>significance level</strong>, often denoted by <span class="math inline">\(\alpha\)</span>, is the highest probability you are willing to accept of rejecting the null hypothesis when it is actually true. A commonly used significance level is 0.05 (or 5%)</p>
</div>
<div id="report-rmd" class="section level3">
<h3>Report &gt; Rmd</h3>
<p>Add code to <a href="https://radiant-rstats.github.io/docs/data/report.html" target="_blank"><em>Report &gt; Rmd</em></a> to (re)create the analysis by clicking the <i title="report results" class="fa fa-edit"></i> icon on the bottom left of your screen or by pressing <code>ALT-enter</code> on your keyboard.</p>
<p>If a plot was created it can be customized using <code>ggplot2</code> commands (e.g., <code>plot(result, plots = &quot;bar&quot;, custom = TRUE) + labs(title = &quot;Compare proportions&quot;)</code>). See <a href="https://radiant-rstats.github.io/docs/data/visualize.html" target="_blank"><em>Data &gt; Visualize</em></a> for details.</p>
</div>


&copy; Vincent Nijs (2018) <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0" src="/docs/images/by-nc-sa.png"/></a>

<!-- some extra javascript for older browsers -->
<script type="text/javascript" src="libs/polyfill.js"></script>

<!-- mathjax -->
<!-- <script type='text/javascript' src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script> -->

<script>

  // manage active state of menu based on current page
  $(document).ready(function () {

      // active menu
      href = window.location.pathname
      href = href.substr(href.lastIndexOf('/') + 1)
      $('a[href="' + href + '"]').parent().addClass('active');

      // manage active menu header
      if (href.startsWith('authoring_'))
        $('a[href="' + 'authoring' + '"]').parent().addClass('active');
      else if (href.endsWith('_format.html'))
        $('a[href="' + 'formats' + '"]').parent().addClass('active');
      else if (href.startsWith('developer_'))
        $('a[href="' + 'developer' + '"]').parent().addClass('active');

  });

  // Google analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61296577-2', 'auto');
  ga('send', 'pageview');

</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
